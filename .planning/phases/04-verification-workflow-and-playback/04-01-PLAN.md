---
phase: 04-verification-workflow-and-playback
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - renderer/App.jsx
  - renderer/components/PlaylistView.jsx
autonomous: true

must_haves:
  truths:
    - User can view list of suggested playlists in UI
    - Each playlist shows track count and metadata
    - Clicking a playlist displays its tracks in detail
    - Track list shows artist, title, BPM, key, duration
  artifacts:
    - renderer/components/PlaylistView.jsx
  key_links:
    - PlaylistView component integrated into App.jsx
    - Playlists rendered from Phase 3 playlist generation data
---

<objective>
Build playlist visualization UI that displays suggested playlists from Phase 3 clustering with complete track lists and metadata.

Purpose: Users need to see which tracks are grouped together before verifying them through playback.
Output: PlaylistView component showing playlists with expandable track lists.
</objective>

<execution_context>
@/home/thomas/.claude/get-shit-done/workflows/execute-plan.md
@/home/thomas/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-verification-workflow-and-playback/04-RESEARCH.md

# Recent Phase 3 implementation
@renderer/App.jsx
@src/services/playlistClusteringService.js
@src/services/similaritySearchService.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create PlaylistView component</name>
  <files>renderer/components/PlaylistView.jsx</files>
  <action>
Create new React component that:
- Receives array of suggested playlists from Phase 3 clustering
- Renders playlist cards with: name, track count, confidence score, BPM range
- Shows expandable track list for each playlist
- Uses existing track table patterns (virtualization if >50 tracks)
- Displays track metadata: artist, title, BPM, key, genre, duration
- Includes mini waveform preview from existing anlzWaveform data
  </action>
  <verify>
```bash
# Component file exists
ls renderer/components/PlaylistView.jsx

# Contains key elements
grep -E "(PlaylistView|useState|track)" renderer/components/PlaylistView.jsx
```
  </verify>
  <done>
PlaylistView.jsx created with playlist cards, expandable track lists, metadata display
  </done>
</task>

<task type="auto">
  <name>Task 2: Integrate PlaylistView into App.jsx</name>
  <files>renderer/App.jsx</files>
  <action>
Update App.jsx to:
- Add state for suggested playlists (from Phase 3 clustering results)
- Add "Suggested Playlists" section in UI after track table
- Import and render PlaylistView component
- Pass playlist data from clustering service results
- Wire up playlist selection state
- Ensure existing audio playback infrastructure is accessible to playlist tracks
  </action>
  <verify>
```bash
# PlaylistView imported and used
grep "import.*PlaylistView" renderer/App.jsx
grep "<PlaylistView" renderer/App.jsx

# Playlist state exists
grep "suggestedPlaylists" renderer/App.jsx
```
  </verify>
  <done>
App.jsx shows suggested playlists section, renders PlaylistView with clustering data
  </done>
</task>

<task type="auto">
  <name>Task 3: Add playlist metadata display</name>
  <files>renderer/App.jsx</files>
  <action>
Enhance playlist display with:
- Show clustering metadata: confidence score, BPM range (min-max), key distribution
- Display average flow score for playlist
- Show which folder(s) tracks came from
- Add visual indicator for playlist quality (high/medium/low confidence)
- Include track count and total duration
  </action>
  <verify>
```bash
# Metadata rendering exists
grep -E "(confidence|BPM range|flow score)" renderer/App.jsx
```
  </verify>
  <done>
Playlists show comprehensive metadata helping user understand grouping rationale
  </done>
</task>

</tasks>

<success_criteria>
**Acceptance:**
1. User can see list of suggested playlists generated by Phase 3
2. Each playlist card shows: name, track count, confidence, BPM range
3. Expanding a playlist shows full track list with metadata
4. Track metadata includes: artist, title, BPM, key, genre, duration, mini waveform
5. UI reuses existing styling patterns from track table

**Testing:**
```bash
# Visual verification in Electron app
npm run start:electron:safe
# 1. Load XML and parse library
# 2. Run analysis to generate playlists (Phase 3)
# 3. Verify "Suggested Playlists" section appears
# 4. Click playlist to expand track list
# 5. Verify all metadata displays correctly
```
</success_criteria>

<must_have_derivation>
**Goal:** User can view suggested playlists with complete track lists showing all metadata (WORK-01)

**Critical behaviors:**
- Playlists from Phase 3 clustering must be visible in UI
- Track lists must show all relevant metadata for verification
- User must be able to inspect any track in any suggested playlist

**Critical artifacts:**
- PlaylistView.jsx component (new UI for playlist display)

**Critical connections:**
- PlaylistView receives data from Phase 3 clustering service
- PlaylistView uses existing track metadata display patterns
- Playlists integrate with existing audio playback infrastructure
</must_have_derivation>
